<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrito - Rostisería SC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-dark bg-dark">
    <div class="container"><a class="navbar-brand fw-bold" href="index.html">Rostisería SC</a></div>
  </nav>

  <div class="container py-5">
    <h2 class="fw-bold mb-4">Tu Carrito de Compras</h2>
    <div id="cart-items" class="mb-3">
      <p class="text-muted">Tu carrito está vacío</p>
    </div>
    <div class="border-top pt-3">
      <div class="d-flex justify-content-between"><span>Subtotal:</span><span id="subtotal">$0</span></div>
      <div class="d-flex justify-content-between"><span>Envío:</span><span id="envio">$0</span></div>
      <div class="d-flex justify-content-between fw-bold fs-5"><span>Total:</span><span id="total">$0</span></div>
    </div>
    <button class="btn btn-danger mt-3 w-100" id="checkout" disabled>Finalizar Compra</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const items=document.getElementById('cart-items');
      const subtotalEl=document.getElementById('subtotal');
      const envioEl=document.getElementById('envio');
      const totalEl=document.getElementById('total');
      const checkout=document.getElementById('checkout');

      let cart=JSON.parse(localStorage.getItem('rostiseria_cart')||'[]');
      function render(){
        items.innerHTML='';
        if(cart.length===0){
          items.innerHTML='<p class="text-muted">Tu carrito está vacío</p>';
          checkout.disabled=true;
        }else{
          checkout.disabled=false;
          cart.forEach((it,i)=>{
            items.innerHTML+=`
              <div class="d-flex align-items-center justify-content-between border-bottom py-2">
                <span>${it.name} x${it.quantity||1}</span>
                <span>$${(it.price*(it.quantity||1)).toLocaleString()}</span>
              </div>`;
          });
        }
        const subtotal=cart.reduce((s,it)=>s+it.price*(it.quantity||1),0);
        const envio=subtotal>0?2000:0;
        subtotalEl.textContent='$'+subtotal.toLocaleString();
        envioEl.textContent='$'+envio.toLocaleString();
        totalEl.textContent='$'+(subtotal+envio).toLocaleString();
      }
      render();
    });
  </script>
</body>
</html>
